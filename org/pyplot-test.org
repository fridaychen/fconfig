:options:
#+startup: inlineimages
:end:

#+call: plot(output="test-1d.png", title="Single Plot2", ylabel="人口",
xrange="[0, m.pi *2]",
f1="lambda x: m.cos(x)", l1="cos()",
f2="lambda x: m.sin(x) + 1",l2="sin()+2")

#+RESULTS:
[[file:test-1d.png]]

#+tblname: hello-bar
| city   | population |
|--------+------------|
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |
| foo    |        100 |
| bar    |        200 |
| わたし |         39 |
| world  |         20 |
| 我们   |         25 |

#+call: plotbar(output="test-bar.png",title="World!",datatable=hello-bar,height=4,width=10,rotation=45)

#+RESULTS:
[[file:test-bar.png]]

#+tblname: hello-pie
| city   | population |
|--------+------------|
| foo    |        100 |
| bar    |        800 |
| わたし |         39 |
| world  |         20 |
| 我们   |        100 |

#+call: plotpie(datatable=hello-pie, output="test-pie.png",title="Hello world!")

#+RESULTS:
[[file:test-pie.png]]

#+call: plothist(datafile="test-data1.txt",output="test-hist.png",title="New World!")

#+RESULTS:
[[file:test-hist.png]]

#+HEADER: :var font=(symbol-value '*fc-plot-font*) :var bg=(symbol-value '*fc-plot-bg*)
#+BEGIN_SRC python :results file
  import fmath.plot as fp
  import numpy as np

  f = fp.start_plot((1, 2), height=3, width=10, font=font, bg=bg)

  xa = np.arange(0, 6.28, 0.1)

  f.select((0, 0))
  f.grid()
  f.plotf(xa, lambda x: m.sin(x), label="sin我们hell")
  f.plotf(xa, lambda x: m.cos(x), label="cos")

  data = fp.loadtxt("test-data2.txt")

  f.select((0, 1))
  f.grid()
  f.plot(data[:, 0], data[:, 1], label="data2")

  f.save("test-subplot.png")

  return "test-subplot.png"
#+END_SRC

#+RESULTS:
[[file:test-subplot.png]]
